<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hồ sơ cá nhân</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1C9+XIm2x5o9Xo0LGXbOOu1Xckf5Bw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      --primary: #2563eb;
      --accent: #22d3ee;
      --bg-1: #0f172a;
      --bg-2: #1e1b4b;
      --surface: rgba(255, 255, 255, 0.08);
      --surface-strong: rgba(255, 255, 255, 0.18);
      --text: #f8fafc;
      --muted: rgba(241, 245, 249, 0.65);
      --border: rgba(255, 255, 255, 0.12);
      --shadow: 0 40px 90px rgba(9, 9, 34, 0.55);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Be Vietnam Pro', sans-serif;
      min-height: 100vh;
      color: var(--text);
      background: radial-gradient(circle at top, rgba(37, 99, 235, 0.25), transparent 55%),
        linear-gradient(135deg, var(--bg-1), var(--bg-2));
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 64px 24px 120px;
      position: relative;
      overflow-x: hidden;
      cursor: none;
      transition: background 0.6s ease;
    }

    body.is-touch {
      cursor: auto;
    }

    body.light-mode {
      --surface: rgba(15, 23, 42, 0.06);
      --surface-strong: rgba(15, 23, 42, 0.1);
      --text: #0f172a;
      --muted: rgba(15, 23, 42, 0.65);
      --border: rgba(15, 23, 42, 0.12);
      color: var(--text);
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: url('https://grainy-gradients.vercel.app/noise.svg');
      opacity: 0.4;
      mix-blend-mode: screen;
      z-index: 0;
    }

    #preloader {
      position: fixed;
      inset: 0;
      background: rgba(7, 11, 30, 0.92);
      display: grid;
      place-items: center;
      z-index: 1000;
      transition: opacity 0.6s ease, visibility 0.6s ease;
    }

    #preloader.hidden {
      opacity: 0;
      visibility: hidden;
    }

    #preloader .loader {
      width: 58px;
      height: 58px;
      border-radius: 50%;
      border: 4px solid rgba(255, 255, 255, 0.2);
      border-top-color: var(--accent);
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .cursor-dot,
    .cursor-ring {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      border-radius: 50%;
      z-index: 999;
      transform: translate(-50%, -50%);
      transition: opacity 0.3s ease;
    }

    .cursor-dot {
      width: 10px;
      height: 10px;
      background: var(--accent);
      box-shadow: 0 0 12px rgba(34, 211, 238, 0.7);
    }

    .cursor-ring {
      width: 44px;
      height: 44px;
      border: 2px solid rgba(255, 255, 255, 0.35);
      backdrop-filter: blur(6px);
    }

    .app-shell {
      width: min(1080px, 100%);
      border-radius: 36px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(15, 23, 42, 0.85));
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      z-index: 1;
      backdrop-filter: blur(18px);
    }

    body.light-mode .app-shell {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(226, 232, 240, 0.85));
      box-shadow: 0 30px 70px rgba(15, 23, 42, 0.12);
    }

    #theme-toggle {
      position: absolute;
      top: 26px;
      right: 26px;
      width: 44px;
      height: 44px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.6);
      color: var(--text);
      display: grid;
      place-items: center;
      cursor: pointer;
      z-index: 5;
    }

    header.hero {
      display: grid;
      grid-template-columns: 180px 1fr;
      gap: 32px;
      padding: 52px clamp(32px, 5vw, 70px) 36px;
      position: relative;
    }

    header.hero::after {
      content: '';
      position: absolute;
      inset: auto clamp(32px, 5vw, 70px) 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    }

    .avatar-frame {
      position: relative;
      width: 180px;
      height: 180px;
      border-radius: 50%;
      padding: 8px;
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.6), rgba(37, 99, 235, 0.6));
      box-shadow: 0 20px 40px rgba(37, 99, 235, 0.35);
    }

    .avatar-frame img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
      border: 4px solid rgba(15, 23, 42, 0.55);
    }

    .hero-content {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .hero-content span.badge {
      align-self: flex-start;
      padding: 6px 16px;
      border-radius: 999px;
      font-size: 13px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.24);
      color: var(--muted);
    }

    .hero-content h1 {
      font-size: clamp(34px, 4vw, 50px);
      line-height: 1.1;
      font-weight: 700;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    #typing-effect {
      color: var(--accent);
      min-width: 12px;
      display: inline-block;
    }

    .typing-cursor {
      border-right: 3px solid var(--accent);
      animation: blink 0.8s step-end infinite;
    }

    @keyframes blink {
      0%, 100% { border-color: transparent; }
      50% { border-color: var(--accent); }
    }

    .hero-sub {
      font-size: 16px;
      color: var(--muted);
      max-width: 540px;
    }

    .hero-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 18px 28px;
      color: var(--muted);
      font-size: 15px;
    }

    .hero-meta span {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .hero-actions {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      margin-top: 6px;
    }

    .hero-actions a {
      text-decoration: none;
      padding: 12px 24px;
      border-radius: 16px;
      font-weight: 600;
      border: 1px solid rgba(255, 255, 255, 0.18);
      color: var(--text);
      transition: transform 0.3s ease, border-color 0.3s ease, background 0.3s ease;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(6px);
    }

    .hero-actions a.primary {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      border: none;
      box-shadow: 0 16px 34px rgba(37, 99, 235, 0.35);
    }

    .hero-actions a:hover {
      transform: translateY(-3px);
      border-color: rgba(255, 255, 255, 0.4);
    }

    nav.tabs {
      margin: clamp(16px, 3vw, 36px) clamp(32px, 5vw, 70px) 0;
      display: flex;
      gap: 10px;
      background: rgba(15, 23, 42, 0.65);
      border-radius: 18px;
      padding: 12px;
      border: 1px solid var(--border);
      position: sticky;
      top: 24px;
      z-index: 4;
      backdrop-filter: blur(14px);
    }

    body.light-mode nav.tabs {
      background: rgba(255, 255, 255, 0.8);
    }

    nav.tabs button {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 12px;
      border-radius: 14px;
      font-weight: 500;
      cursor: pointer;
      position: relative;
      transition: color 0.3s ease, background 0.3s ease;
    }

    nav.tabs button.active {
      color: var(--text);
      background: rgba(255, 255, 255, 0.1);
    }

    nav.tabs button::after {
      content: '';
      position: absolute;
      inset: auto 18px -6px 18px;
      height: 3px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      opacity: 0;
      transform: scaleX(0.5);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    nav.tabs button.active::after {
      opacity: 1;
      transform: scaleX(1);
    }

    .content {
      padding: 40px clamp(32px, 5vw, 70px) 64px;
      display: flex;
      flex-direction: column;
      gap: 60px;
    }

    section.tab-pane {
      display: none;
      animation: rise 0.6s ease;
    }

    section.tab-pane.active {
      display: block;
    }

    @keyframes rise {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h3.section-title {
      font-size: 26px;
      margin-bottom: 28px;
      display: inline-flex;
      align-items: center;
      gap: 14px;
    }

    h3.section-title::before {
      content: '';
      width: 32px;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
    }

    .info-grid,
    .skills-grid,
    .contact-grid {
      display: grid;
      gap: 24px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    .info-card,
    .skill-card,
    .contact-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 22px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      transition: transform 0.3s ease, border-color 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .info-card:hover,
    .skill-card:hover,
    .contact-card:hover {
      transform: translateY(-6px);
      border-color: rgba(255, 255, 255, 0.28);
    }

    .info-card i,
    .skill-card i {
      font-size: 24px;
      color: var(--accent);
    }

    .projects {
      display: grid;
      gap: 26px;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }

    .project-card {
      border-radius: 24px;
      overflow: hidden;
      background: var(--surface);
      border: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      transition: transform 0.35s ease, box-shadow 0.35s ease;
    }

    .project-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 24px 50px rgba(15, 23, 42, 0.45);
    }

    .project-card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .project-body {
      padding: 22px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .project-tags span {
      padding: 6px 14px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.16);
      font-size: 12px;
      letter-spacing: 0.04em;
    }

    .project-links {
      display: flex;
      gap: 16px;
      font-weight: 500;
    }

    .project-links a {
      color: var(--accent);
      text-decoration: none;
      position: relative;
    }

    .project-links a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -4px;
      width: 100%;
      height: 2px;
      background: currentColor;
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s ease;
    }

    .project-links a:hover::after {
      transform: scaleX(1);
    }

    .lucky-wrapper {
      display: grid;
      gap: 36px;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      align-items: center;
    }

    .wheel-shell {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .wheel-container {
      position: relative;
      width: min(360px, 80vw);
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(255, 255, 255, 0.15), rgba(15, 23, 42, 0.8));
      box-shadow: 0 25px 60px rgba(15, 23, 42, 0.45);
    }

    #wheel-canvas {
      width: 88%;
      height: 88%;
      border-radius: 50%;
      border: 3px solid rgba(255, 255, 255, 0.2);
      transition: transform 5s cubic-bezier(0.33, 1, 0.68, 1);
      background: rgba(15, 23, 42, 0.4);
    }

    .wheel-pointer {
      position: absolute;
      top: -16px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 32px solid var(--accent);
      filter: drop-shadow(0 8px 16px rgba(15, 23, 42, 0.5));
    }

    .spin-btn {
      padding: 14px 34px;
      border-radius: 18px;
      border: none;
      font-weight: 600;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: #fff;
      cursor: pointer;
      box-shadow: 0 20px 40px rgba(37, 99, 235, 0.35);
      transition: transform 0.3s ease;
    }

    .spin-btn:hover:not([disabled]) {
      transform: translateY(-4px);
    }

    .spin-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      box-shadow: none;
    }

    .spin-result {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      padding: 22px;
      border-radius: 22px;
      background: var(--surface);
      border: 1px solid var(--border);
      text-align: center;
    }

    .spin-result img {
      width: 90px;
      height: 90px;
      object-fit: contain;
    }

    .probability-controls {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .probability-row {
      display: grid;
      gap: 16px;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 2fr) 80px;
      align-items: center;
      padding: 16px 18px;
      border-radius: 18px;
      background: var(--surface);
      border: 1px solid var(--border);
    }

    .probability-info {
      display: flex;
      align-items: center;
      gap: 14px;
      font-weight: 600;
    }

    .probability-info img {
      width: 52px;
      height: 52px;
      border-radius: 16px;
      background: rgba(15, 23, 42, 0.65);
      padding: 6px;
    }

    .probability-row input[type="range"] {
      width: 100%;
      accent-color: var(--accent);
    }

    .probability-value {
      font-weight: 700;
      text-align: right;
    }

    .probability-summary {
      margin-top: 12px;
      color: var(--muted);
    }

    .probability-summary.warning {
      color: #fda4af;
      font-weight: 600;
    }

    .contact-card a {
      color: var(--accent);
      text-decoration: none;
    }

    .copy-email-wrapper {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }

    .copy-btn {
      border: none;
      background: rgba(255, 255, 255, 0.18);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 12px;
      cursor: pointer;
      position: relative;
    }

    .tooltip {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      background: rgba(15, 23, 42, 0.85);
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.25s ease;
      pointer-events: none;
    }

    .copy-btn.copied .tooltip {
      opacity: 1;
    }

    form.contact-form,
    form.admin-form {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .form-group label {
      font-size: 14px;
      color: var(--muted);
    }

    .form-group input,
    .form-group textarea {
      background: rgba(15, 23, 42, 0.65);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px 14px;
      color: var(--text);
      font-family: inherit;
      font-size: 15px;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--accent);
    }

    .submit-btn {
      border: none;
      border-radius: 16px;
      padding: 12px 20px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: #fff;
    }

    footer {
      text-align: center;
      padding: 26px;
      background: rgba(15, 23, 42, 0.75);
      color: var(--muted);
      border-top: 1px solid var(--border);
    }

    #admin-toggle {
      position: fixed;
      right: 32px;
      bottom: 32px;
      width: 60px;
      height: 60px;
      border-radius: 20px;
      border: none;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: #fff;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.45);
      cursor: pointer;
      z-index: 10;
    }

    .admin-panel {
      position: fixed;
      right: 32px;
      bottom: 110px;
      width: min(320px, 88vw);
      padding: 22px;
      border-radius: 24px;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid var(--border);
      box-shadow: 0 28px 70px rgba(15, 23, 42, 0.55);
      display: none;
      flex-direction: column;
      gap: 18px;
      backdrop-filter: blur(16px);
      z-index: 12;
    }

    .admin-panel.active {
      display: flex;
      animation: rise 0.45s ease;
    }

    .admin-panel header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .admin-panel h4 {
      font-size: 18px;
    }

    .close-admin {
      border: none;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
    }

    .admin-panel .form-group input[type="color"] {
      padding: 0;
      height: 42px;
    }

    @media (max-width: 860px) {
      header.hero {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .avatar-frame {
        margin: 0 auto;
      }

      .hero-content span.badge {
        align-self: center;
      }

      .hero-actions {
        justify-content: center;
      }

      nav.tabs {
        position: static;
      }
    }

    @media (max-width: 560px) {
      body {
        padding: 40px 14px 100px;
      }

      .probability-row {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .probability-value {
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div id="preloader"><div class="loader"></div></div>
  <div class="cursor-dot"></div>
  <div class="cursor-ring"></div>
  <div class="app-shell">
    <button id="theme-toggle" title="Đổi giao diện"><i class="fas fa-moon"></i></button>
    <header class="hero">
      <div class="avatar-frame">
        <img src="https://avatars.githubusercontent.com/u/56058923?v=4" alt="Avatar" />
      </div>
      <div class="hero-content">
        <span class="badge">Digital Profile</span>
        <h1><span data-bind="displayName">LORAX</span> <span id="typing-effect"></span><span class="typing-cursor"></span></h1>
        <p id="tagline" class="hero-sub">Developer sáng tạo trải nghiệm web tinh tế, mượt mà.</p>
        <div class="hero-meta">
          <span><i class="fas fa-location-dot"></i> Hồ Chí Minh</span>
          <span><i class="fas fa-briefcase"></i> Web Developer</span>
          <span><i class="fas fa-clock"></i> <span id="time">Đang cập nhật...</span></span>
          <span><i class="fas fa-signal"></i> IP: <span id="ip">Đang đo...</span></span>
          <span><i class="fas fa-gauge-high"></i> Tốc độ: <span id="speed">Đang kiểm tra...</span></span>
        </div>
        <div class="hero-actions">
          <a href="#projects" class="primary">Xem dự án</a>
          <a href="#contact">Liên hệ</a>
        </div>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab-btn active" data-tab="intro"><i class="fas fa-user"></i> Giới thiệu</button>
      <button class="tab-btn" data-tab="skills"><i class="fas fa-bolt"></i> Kỹ năng</button>
      <button class="tab-btn" data-tab="projects"><i class="fas fa-diagram-project"></i> Dự án</button>
      <button class="tab-btn" data-tab="lucky"><i class="fas fa-gift"></i> Vòng quay</button>
      <button class="tab-btn" data-tab="contact"><i class="fas fa-address-card"></i> Liên hệ</button>
      <button class="tab-btn" data-tab="message"><i class="fas fa-paper-plane"></i> Lời nhắn</button>
    </nav>

    <main class="content">
      <section id="intro" class="tab-pane active">
        <h3 class="section-title">Xin chào</h3>
        <div class="info-grid">
          <article class="info-card">
            <i class="fas fa-handshake-angle"></i>
            <h4>Đồng hành cùng thương hiệu</h4>
            <p>Hơn 50 khách hàng tin tưởng hợp tác và phát triển sản phẩm cùng mình.</p>
          </article>
          <article class="info-card">
            <i class="fas fa-code"></i>
            <h4>Kinh nghiệm thực chiến</h4>
            <p>3+ năm xây dựng sản phẩm web tốc độ cao, tối ưu trải nghiệm và hiệu năng.</p>
          </article>
          <article class="info-card">
            <i class="fas fa-award"></i>
            <h4>Thành tựu nổi bật</h4>
            <p>Top 10 Hackathon Việt Nam 2023 cùng nhiều giải thưởng thiết kế UX.</p>
          </article>
        </div>
      </section>

      <section id="skills" class="tab-pane">
        <h3 class="section-title">Kỹ năng trọng điểm</h3>
        <div class="skills-grid">
          <div class="skill-card"><i class="fab fa-js"></i> JavaScript / TypeScript</div>
          <div class="skill-card"><i class="fab fa-react"></i> React / Next.js</div>
          <div class="skill-card"><i class="fas fa-cloud"></i> Firebase / Supabase</div>
          <div class="skill-card"><i class="fas fa-cubes"></i> Design Systems</div>
          <div class="skill-card"><i class="fas fa-laptop-code"></i> UI Engineering</div>
          <div class="skill-card"><i class="fas fa-server"></i> Node.js / REST API</div>
        </div>
      </section>

      <section id="projects" class="tab-pane">
        <h3 class="section-title">Dự án tiêu biểu</h3>
        <div class="projects">
          <article class="project-card">
            <img src="https://images.unsplash.com/photo-1511379938547-c1f69419868d" alt="Music Streaming" />
            <div class="project-body">
              <h4>Nền tảng nghe nhạc</h4>
              <p>Ứng dụng nghe nhạc trực tuyến với gợi ý theo cảm xúc và cá nhân hóa từng khoảnh khắc.</p>
              <div class="project-tags"><span>Next.js</span><span>TailwindCSS</span><span>Supabase</span></div>
              <div class="project-links"><a href="#">Xem demo</a><a href="#">Mã nguồn</a></div>
            </div>
          </article>
          <article class="project-card">
            <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee" alt="Analytics" />
            <div class="project-body">
              <h4>Analytics Dashboard</h4>
              <p>Giải pháp theo dõi dữ liệu realtime với biểu đồ tương tác và module AI dự báo.</p>
              <div class="project-tags"><span>React</span><span>Recharts</span><span>Node.js</span></div>
              <div class="project-links"><a href="#">Xem demo</a><a href="#">Mã nguồn</a></div>
            </div>
          </article>
          <article class="project-card">
            <img src="https://images.unsplash.com/photo-1523475472560-d2df97ec485c" alt="Ecommerce" />
            <div class="project-body">
              <h4>Trải nghiệm thương mại</h4>
              <p>Kiến trúc headless giúp tối ưu tốc độ, cá nhân hóa và tích hợp thanh toán toàn cầu.</p>
              <div class="project-tags"><span>Next.js</span><span>Stripe</span><span>Headless CMS</span></div>
              <div class="project-links"><a href="#">Xem demo</a><a href="#">Mã nguồn</a></div>
            </div>
          </article>
        </div>
      </section>
      <section id="lucky" class="tab-pane">
        <h3 class="section-title">Vòng quay may mắn</h3>
        <div class="lucky-wrapper">
          <div class="wheel-shell">
            <div class="wheel-container">
              <canvas id="wheel-canvas" width="600" height="600"></canvas>
              <div class="wheel-pointer"></div>
            </div>
            <button id="spin-btn" class="spin-btn"><i class="fas fa-sync"></i> Quay ngay</button>
            <div class="spin-result" id="spin-result">
              <strong id="spin-result-text">Nhấn "Quay ngay" để thử vận may!</strong>
              <img id="spin-result-image" src="https://cdn-icons-png.flaticon.com/512/744/744922.png" alt="Quà tặng" />
            </div>
          </div>
          <div>
            <p class="hero-sub">Điều chỉnh trọng số từng phần thưởng, hệ thống sẽ chuẩn hóa để tính toán xác suất chính xác khi quay.</p>
            <div class="probability-controls" id="probability-controls"></div>
            <div class="probability-summary" id="probability-summary">Tổng tỉ lệ: <span id="probability-total">100%</span></div>
            <p class="hero-sub">Tổng có thể khác 100%, thuật toán sẽ tự cân bằng trước khi quay.</p>
          </div>
        </div>
      </section>

      <section id="contact" class="tab-pane">
        <h3 class="section-title">Kết nối</h3>
        <div class="contact-grid">
          <div class="contact-card">
            <h4>Email</h4>
            <div class="copy-email-wrapper">
              <a href="mailto:lorax.mb66@gmail.com" class="contact-link">lorax.mb66@gmail.com</a>
              <button id="copy-email-btn" class="copy-btn"><i class="fas fa-copy"></i><span class="tooltip">Sao chép</span></button>
            </div>
          </div>
          <div class="contact-card">
            <h4>Mạng xã hội</h4>
            <a href="https://facebook.com/ZinhQ9.VN" target="_blank" rel="noreferrer"><i class="fab fa-facebook"></i> Facebook</a>
            <a href="https://www.tiktok.com/@ZinhQ9" target="_blank" rel="noreferrer"><i class="fab fa-tiktok"></i> TikTok</a>
          </div>
        </div>
      </section>

      <section id="message" class="tab-pane">
        <h3 class="section-title">Gửi lời nhắn</h3>
        <form action="https://api.web3forms.com/submit" method="POST" class="contact-form">
          <input type="hidden" name="access_key" value="119120f8-0b84-4b29-8342-fc8cf0f538e9" />
          <div class="form-group">
            <label for="name">Tên của bạn</label>
            <input id="name" type="text" name="name" placeholder="Tên của bạn" required />
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input id="email" type="email" name="email" placeholder="Email của bạn" required />
          </div>
          <div class="form-group">
            <label for="message-input">Lời nhắn</label>
            <textarea id="message-input" name="message" rows="5" placeholder="Chia sẻ điều bạn quan tâm..." required></textarea>
          </div>
          <button type="submit" class="submit-btn">Gửi tin nhắn <i class="fas fa-paper-plane"></i></button>
        </form>
      </section>
    </main>

    <footer>© <span data-bind="displayName">LORAX</span> • All rights reserved.</footer>
  </div>

  <button id="admin-toggle" title="Bảng quản trị"><i class="fas fa-sliders-h"></i></button>
  <aside id="admin-panel" class="admin-panel" aria-hidden="true">
    <header>
      <h4>Tùy chỉnh giao diện</h4>
      <button class="close-admin" title="Đóng"><i class="fas fa-times"></i></button>
    </header>
    <form id="admin-form" class="admin-form">
      <div class="form-group">
        <label for="display-name-input">Tên hiển thị</label>
        <input id="display-name-input" name="displayName" type="text" placeholder="Nhập tên..." />
      </div>
      <div class="form-group">
        <label for="tagline-input">Tagline</label>
        <input id="tagline-input" name="tagline" type="text" placeholder="Mô tả ngắn..." />
      </div>
      <div class="form-group">
        <label for="messages-input">Câu giới thiệu (mỗi dòng 1 câu)</label>
        <textarea id="messages-input" name="messages" rows="3" placeholder="Ví dụ:\nDigital Product Engineer\nYêu công nghệ mới\nXây dựng sản phẩm số"></textarea>
      </div>
      <div class="form-group">
        <label for="primary-color-input">Màu chính</label>
        <input id="primary-color-input" name="primary" type="color" value="#2563eb" />
      </div>
      <div class="form-group">
        <label for="accent-color-input">Màu nhấn</label>
        <input id="accent-color-input" name="accent" type="color" value="#22d3ee" />
      </div>
      <div class="form-group">
        <label for="bg1-color-input">Gradient Start</label>
        <input id="bg1-color-input" name="bg1" type="color" value="#0f172a" />
      </div>
      <div class="form-group">
        <label for="bg2-color-input">Gradient End</label>
        <input id="bg2-color-input" name="bg2" type="color" value="#1e1b4b" />
      </div>
      <div class="form-actions">
        <button type="submit" class="submit-btn">Lưu thiết lập</button>
        <button type="button" id="reset-settings" class="submit-btn" style="background: rgba(255, 255, 255, 0.16); color: var(--text);">Khôi phục mặc định</button>
      </div>
    </form>
  </aside>
  <script>
    const defaultSettings = {
      displayName: 'LORAX',
      tagline: 'Developer sáng tạo trải nghiệm web tinh tế, mượt mà.',
      messages: ['Digital Product Engineer', 'Web Developer', 'Yêu thích tối ưu trải nghiệm'],
      primary: '#2563eb',
      accent: '#22d3ee',
      bg1: '#0f172a',
      bg2: '#1e1b4b'
    };

    function mergeSettings(partial = {}) {
      return { ...defaultSettings, ...partial, messages: partial.messages || defaultSettings.messages };
    }

    function applySettings(settings) {
      const resolved = mergeSettings(settings);
      document.querySelectorAll('[data-bind="displayName"]').forEach(el => el.textContent = resolved.displayName);
      const tagline = document.getElementById('tagline');
      if (tagline) tagline.textContent = resolved.tagline;
      document.documentElement.style.setProperty('--primary', resolved.primary);
      document.documentElement.style.setProperty('--accent', resolved.accent);
      document.documentElement.style.setProperty('--bg-1', resolved.bg1);
      document.documentElement.style.setProperty('--bg-2', resolved.bg2);
      const typing = document.getElementById('typing-effect');
      if (typing) typing.dataset.messages = JSON.stringify(resolved.messages);
      document.title = `${resolved.displayName} • Hồ sơ cá nhân`;
    }

    function saveSettings(settings) {
      localStorage.setItem('profile-settings', JSON.stringify(settings));
    }

    function readSettings() {
      try {
        const raw = localStorage.getItem('profile-settings');
        if (!raw) return { ...defaultSettings };
        const parsed = JSON.parse(raw);
        return mergeSettings(parsed);
      } catch (error) {
        console.error('Không thể đọc cấu hình', error);
        return { ...defaultSettings };
      }
    }

    window.addEventListener('load', () => {
      document.getElementById('preloader').classList.add('hidden');
      const settings = readSettings();
      applySettings(settings);
      populateAdminForm(settings);
      initTyping();
      initThemeToggle();
      initTabs();
      initClipboard();
      initTime();
      initNetworkInfo();
      initLuckyWheel();
      initAdminPanel();
      initCursor();
    });

    function populateAdminForm(settings) {
      const form = document.getElementById('admin-form');
      if (!form) return;
      form.displayName.value = settings.displayName;
      form.tagline.value = settings.tagline;
      form.messages.value = settings.messages.join('\n');
      form.primary.value = settings.primary;
      form.accent.value = settings.accent;
      form.bg1.value = settings.bg1;
      form.bg2.value = settings.bg2;
    }

    function initCursor() {
      const dot = document.querySelector('.cursor-dot');
      const ring = document.querySelector('.cursor-ring');
      if (!dot || !ring) return;
      if (window.matchMedia('(pointer: coarse)').matches) {
        document.body.classList.add('is-touch');
        dot.style.display = 'none';
        ring.style.display = 'none';
        return;
      }
      let mouseX = window.innerWidth / 2;
      let mouseY = window.innerHeight / 2;
      let ringX = mouseX;
      let ringY = mouseY;
      const delay = 0.18;

      const render = () => {
        ringX += (mouseX - ringX) * delay;
        ringY += (mouseY - ringY) * delay;
        dot.style.transform = `translate(${mouseX}px, ${mouseY}px)`;
        ring.style.transform = `translate(${ringX}px, ${ringY}px)`;
        requestAnimationFrame(render);
      };
      render();

      document.addEventListener('mousemove', event => {
        mouseX = event.clientX;
        mouseY = event.clientY;
      }, { passive: true });

      document.querySelectorAll('a, button, input, textarea').forEach(el => {
        el.addEventListener('mouseenter', () => {
          ring.style.width = '56px';
          ring.style.height = '56px';
          ring.style.borderColor = 'rgba(255,255,255,0.55)';
        });
        el.addEventListener('mouseleave', () => {
          ring.style.width = '44px';
          ring.style.height = '44px';
          ring.style.borderColor = 'rgba(255,255,255,0.35)';
        });
      });
    }

    function initTyping() {
      const typing = document.getElementById('typing-effect');
      if (!typing) return;
      if (typing.__timers) {
        typing.__timers.forEach(timer => clearTimeout(timer));
      }
      typing.__timers = [];
      const data = typing.dataset.messages ? JSON.parse(typing.dataset.messages) : defaultSettings.messages;
      let index = 0;
      let charIndex = 0;

      const schedule = (callback, delay) => {
        const id = setTimeout(callback, delay);
        typing.__timers.push(id);
      };

      const type = () => {
        if (charIndex < data[index].length) {
          typing.textContent += data[index].charAt(charIndex);
          charIndex++;
          schedule(type, 110);
        } else {
          schedule(erase, 2000);
        }
      };

      const erase = () => {
        if (charIndex > 0) {
          typing.textContent = data[index].slice(0, charIndex - 1);
          charIndex--;
          schedule(erase, 55);
        } else {
          index = (index + 1) % data.length;
          schedule(type, 350);
        }
      };

      typing.textContent = '';
      type();
    }

    function initThemeToggle() {
      const toggle = document.getElementById('theme-toggle');
      if (!toggle) return;
      const icon = toggle.querySelector('i');
      const stored = localStorage.getItem('theme-mode');
      if (stored === 'light') {
        document.body.classList.add('light-mode');
        icon.classList.replace('fa-moon', 'fa-sun');
        applyLightBackground();
      }
      toggle.addEventListener('click', () => {
        document.body.classList.toggle('light-mode');
        const isLight = document.body.classList.contains('light-mode');
        if (isLight) {
          icon.classList.replace('fa-moon', 'fa-sun');
          localStorage.setItem('theme-mode', 'light');
          applyLightBackground();
        } else {
          icon.classList.replace('fa-sun', 'fa-moon');
          localStorage.setItem('theme-mode', 'dark');
          document.body.style.background = '';
          document.body.style.color = '';
        }
      });
    }

    function applyLightBackground() {
      document.body.style.background = 'linear-gradient(135deg, #f8fafc, #e2e8f0)';
      document.body.style.color = '#0f172a';
    }

    function initTabs() {
      const buttons = document.querySelectorAll('.tab-btn');
      const panes = document.querySelectorAll('.tab-pane');
      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          buttons.forEach(b => b.classList.remove('active'));
          panes.forEach(p => p.classList.remove('active'));
          btn.classList.add('active');
          const pane = document.getElementById(btn.dataset.tab);
          if (pane) pane.classList.add('active');
        });
      });
    }

    function initClipboard() {
      const copyBtn = document.getElementById('copy-email-btn');
      if (!copyBtn) return;
      const tooltip = copyBtn.querySelector('.tooltip');
      copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText('lorax.mb66@gmail.com').then(() => {
          copyBtn.classList.add('copied');
          tooltip.textContent = 'Đã chép!';
          setTimeout(() => {
            copyBtn.classList.remove('copied');
            tooltip.textContent = 'Sao chép';
          }, 2000);
        });
      });
    }
    function initTime() {
      const timeEl = document.getElementById('time');
      if (!timeEl) return;
      const update = () => {
        timeEl.textContent = new Date().toLocaleString('vi-VN', { dateStyle: 'medium', timeStyle: 'medium' });
      };
      update();
      setInterval(update, 1000);
    }

    async function initNetworkInfo() {
      const ipEl = document.getElementById('ip');
      const speedEl = document.getElementById('speed');
      const controller = new AbortController();
      const timeout = setTimeout(() => controller.abort(), 7000);
      try {
        const response = await fetch('https://api.ipify.org?format=json', { signal: controller.signal });
        const data = await response.json();
        ipEl.textContent = data.ip;
      } catch (error) {
        ipEl.textContent = 'Không xác định';
      } finally {
        clearTimeout(timeout);
      }

      try {
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        if (connection && connection.downlink) {
          speedEl.textContent = `${connection.downlink.toFixed(1)} Mbps`;
          return;
        }
      } catch (error) {
        console.warn('Không đọc được thông tin kết nối', error);
      }

      measureSpeed(speedEl);
    }

    async function measureSpeed(el) {
      const testUrl = 'https://speed.cloudflare.com/__down?bytes=2500000';
      const controller = new AbortController();
      const timeout = setTimeout(() => controller.abort(), 8000);
      try {
        const start = performance.now();
        const response = await fetch(testUrl, { signal: controller.signal, cache: 'no-store' });
        const blob = await response.blob();
        const duration = (performance.now() - start) / 1000;
        const bits = blob.size * 8;
        const mbps = bits / duration / (1024 * 1024);
        el.textContent = `${mbps.toFixed(2)} Mbps`;
      } catch (error) {
        el.textContent = 'Không đo được';
      } finally {
        clearTimeout(timeout);
      }
    }

    function initLuckyWheel() {
      const canvas = document.getElementById('wheel-canvas');
      const spinButton = document.getElementById('spin-btn');
      const controls = document.getElementById('probability-controls');
      const resultText = document.getElementById('spin-result-text');
      const resultImage = document.getElementById('spin-result-image');
      const totalEl = document.getElementById('probability-total');
      const summaryEl = document.getElementById('probability-summary');
      if (!canvas || !spinButton || !controls) return;
      const ctx = canvas.getContext('2d');

      const prizes = [
        { key: 'headphones', name: 'Tai nghe Bluetooth', weight: 25, color: '#ff9f1c', textColor: '#ffffff', image: 'https://cdn-icons-png.flaticon.com/512/3209/3209333.png' },
        { key: 'voucher', name: 'Voucher mua sắm', weight: 20, color: '#2ec4b6', textColor: '#ffffff', image: 'https://cdn-icons-png.flaticon.com/512/942/942196.png' },
        { key: 'shirt', name: 'Áo thun độc quyền', weight: 15, color: '#e71d36', textColor: '#ffffff', image: 'https://cdn-icons-png.flaticon.com/512/892/892458.png' },
        { key: 'mug', name: 'Cốc sứ xịn xò', weight: 20, color: '#f46036', textColor: '#ffffff', image: 'https://cdn-icons-png.flaticon.com/512/1047/1047505.png' },
        { key: 'sticker', name: 'Bộ sticker dễ thương', weight: 10, color: '#9b5de5', textColor: '#ffffff', image: 'https://cdn-icons-png.flaticon.com/512/2991/2991148.png' },
        { key: 'none', name: 'Chúc bạn may mắn lần sau', weight: 10, color: '#ced4da', textColor: '#1f2937', image: 'https://cdn-icons-png.flaticon.com/512/3917/3917132.png' }
      ];

      const prizeImages = new Map();
      let segments = [];
      let isSpinning = false;
      let pendingPrize = null;
      let latestRotation = 0;

      const getTotal = () => prizes.reduce((sum, prize) => sum + Math.max(0, prize.weight), 0);

      const updateTotal = () => {
        const total = getTotal();
        totalEl.textContent = `${total}%`;
        summaryEl.classList.toggle('warning', total !== 100 && total !== 0);
        spinButton.disabled = total === 0 || isSpinning;
      };

      const loadImages = () => {
        prizes.forEach(prize => {
          const img = new Image();
          img.src = prize.image;
          img.onload = () => {
            prizeImages.set(prize.key, img);
            requestAnimationFrame(drawWheel);
          };
          img.onerror = () => prizeImages.set(prize.key, null);
        });
      };

      const createControls = () => {
        controls.innerHTML = '';
        prizes.forEach(prize => {
          const row = document.createElement('div');
          row.className = 'probability-row';
          const info = document.createElement('div');
          info.className = 'probability-info';
          const img = document.createElement('img');
          img.src = prize.image;
          img.alt = prize.name;
          const label = document.createElement('span');
          label.textContent = prize.name;
          info.append(img, label);
          const slider = document.createElement('input');
          slider.type = 'range';
          slider.min = '0';
          slider.max = '100';
          slider.value = prize.weight.toString();
          const value = document.createElement('div');
          value.className = 'probability-value';
          value.textContent = `${prize.weight}%`;
          slider.addEventListener('input', () => {
            prize.weight = parseInt(slider.value, 10) || 0;
            value.textContent = `${prize.weight}%`;
            updateTotal();
            requestAnimationFrame(drawWheel);
          });
          row.append(info, slider, value);
          controls.appendChild(row);
        });
        updateTotal();
      };

      const toDegrees = rad => rad * 180 / Math.PI;

      const drawText = (context, text, maxWidth, lineHeight) => {
        const words = text.split(' ');
        let line = '';
        const lines = [];
        words.forEach(word => {
          const test = `${line}${word} `;
          if (context.measureText(test).width > maxWidth && line !== '') {
            lines.push(line.trim());
            line = `${word} `;
          } else {
            line = test;
          }
        });
        lines.push(line.trim());
        const totalHeight = lines.length * lineHeight;
        context.translate(0, -totalHeight / 2);
        lines.forEach((item, index) => {
          context.fillText(item, 0, index * lineHeight);
        });
      };

      const drawWheel = () => {
        const width = canvas.width;
        const height = canvas.height;
        const radius = Math.min(width, height) / 2 - 10;
        ctx.clearRect(0, 0, width, height);
        ctx.save();
        ctx.translate(width / 2, height / 2);

        const total = getTotal();
        segments = [];
        let startAngle = -Math.PI / 2;
        if (total <= 0) {
          ctx.restore();
          return;
        }

        prizes.forEach(prize => {
          if (prize.weight <= 0) return;
          const sweep = (prize.weight / total) * Math.PI * 2;
          const end = startAngle + sweep;
          ctx.beginPath();
          ctx.moveTo(0, 0);
          ctx.arc(0, 0, radius, startAngle, end);
          ctx.closePath();
          ctx.fillStyle = prize.color;
          ctx.fill();
          ctx.strokeStyle = 'rgba(15, 23, 42, 0.45)';
          ctx.lineWidth = 3;
          ctx.stroke();

          const mid = startAngle + sweep / 2;
          const textRadius = radius * 0.78;
          const imageRadius = radius * 0.52;
          const imageSize = 70;
          const img = prizeImages.get(prize.key);
          if (img && img.complete) {
            ctx.save();
            ctx.rotate(mid);
            ctx.translate(imageRadius, 0);
            ctx.rotate(Math.PI / 2);
            ctx.drawImage(img, -imageSize / 2, -imageSize / 2, imageSize, imageSize);
            ctx.restore();
          }

          ctx.save();
          ctx.rotate(mid);
          ctx.translate(textRadius, 0);
          ctx.rotate(Math.PI / 2);
          ctx.fillStyle = prize.textColor;
          ctx.font = "bold 18px 'Be Vietnam Pro', sans-serif";
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          drawText(ctx, prize.name, radius * 0.9, 20);
          ctx.restore();

          segments.push({ prize, start: startAngle, end });
          startAngle = end;
        });

        ctx.beginPath();
        ctx.arc(0, 0, radius * 0.22, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
        ctx.fill();
        ctx.lineWidth = 2;
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.25)';
        ctx.stroke();

        ctx.restore();
      };

      const pickPrize = () => {
        const total = getTotal();
        let threshold = Math.random() * total;
        for (const prize of prizes) {
          if (prize.weight <= 0) continue;
          threshold -= prize.weight;
          if (threshold <= 0) return prize;
        }
        return prizes[prizes.length - 1];
      };

      const finalizeSpin = () => {
        if (!pendingPrize) return;
        const prize = pendingPrize;
        pendingPrize = null;
        isSpinning = false;
        updateTotal();
        resultText.textContent = prize.key === 'none'
          ? 'Rất tiếc! Bạn chưa trúng thưởng lần này.'
          : `Chúc mừng bạn nhận được: ${prize.name}!`;
        resultImage.src = prize.image;
        resultImage.alt = prize.name;
      };

      spinButton.addEventListener('click', () => {
        if (isSpinning) return;
        const total = getTotal();
        if (total <= 0) {
          resultText.textContent = 'Vui lòng tăng tỉ lệ cho ít nhất một phần thưởng để quay.';
          return;
        }
        const selected = pickPrize();
        const segment = segments.find(seg => seg.prize === selected);
        if (!segment) {
          resultText.textContent = 'Không thể xác định phần thưởng, thử lại sau nhé!';
          return;
        }
        const startDeg = toDegrees(segment.start);
        const endDeg = toDegrees(segment.end);
        const size = endDeg - startDeg;
        const randomOffset = (Math.random() - 0.5) * size * 0.6;
        const target = startDeg + size / 2 + randomOffset;
        const rotations = 360 * 5;
        latestRotation = rotations + (270 - target);
        pendingPrize = selected;
        isSpinning = true;
        spinButton.disabled = true;
        canvas.style.transition = 'transform 5s cubic-bezier(0.33, 1, 0.68, 1)';
        canvas.style.transform = `rotate(${latestRotation}deg)`;
        resultText.textContent = 'Đang quay...';
      });

      canvas.addEventListener('transitionend', () => {
        canvas.style.transition = 'none';
        latestRotation = latestRotation % 360;
        canvas.style.transform = `rotate(${latestRotation}deg)`;
        void canvas.offsetWidth;
        canvas.style.transition = '';
        finalizeSpin();
      });

      loadImages();
      createControls();
      drawWheel();
    }

    function initAdminPanel() {
      const toggle = document.getElementById('admin-toggle');
      const panel = document.getElementById('admin-panel');
      const form = document.getElementById('admin-form');
      const resetBtn = document.getElementById('reset-settings');
      if (!toggle || !panel || !form || !resetBtn) return;
      const closeBtn = panel.querySelector('.close-admin');

      const open = () => {
        panel.classList.add('active');
        panel.setAttribute('aria-hidden', 'false');
      };
      const close = () => {
        panel.classList.remove('active');
        panel.setAttribute('aria-hidden', 'true');
      };

      toggle.addEventListener('click', () => panel.classList.contains('active') ? close() : open());
      closeBtn.addEventListener('click', close);

      form.addEventListener('submit', event => {
        event.preventDefault();
        const formData = new FormData(form);
        const messages = formData.get('messages').toString().split('\n').map(line => line.trim()).filter(Boolean);
        const settings = {
          displayName: formData.get('displayName').toString().trim() || defaultSettings.displayName,
          tagline: formData.get('tagline').toString().trim() || defaultSettings.tagline,
          messages: messages.length ? messages : defaultSettings.messages,
          primary: formData.get('primary').toString(),
          accent: formData.get('accent').toString(),
          bg1: formData.get('bg1').toString(),
          bg2: formData.get('bg2').toString()
        };
        applySettings(settings);
        saveSettings(settings);
        initTyping();
        close();
      });

      resetBtn.addEventListener('click', () => {
        applySettings(defaultSettings);
        saveSettings(defaultSettings);
        populateAdminForm(defaultSettings);
        initTyping();
      });
    }
  </script>
</body>
</html>
